(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6861dbae"],{"5a91":function(t,e,r){"use strict";r("72c3")},"72c3":function(t,e,r){},bc89:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("el-row",{staticClass:"row-title",attrs:{span:24}},[r("el-col",{attrs:{span:4}},[r("el-button",{staticClass:"addGroup",on:{click:t.handleAddGroup}},[t._v("新增分组")]),r("div",{staticClass:"api-title",staticStyle:{cursor:"pointer"}},[r("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:{name:"实验组列表",params:{project_id:this.$route.params.project_id}}}},[t._v("\n                    所有实验\n                ")])],1),r("aside",[r("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.onRoutes,"active-text-color":"rgb(32, 160, 255)","unique-opened":!0},on:{select:t.selectItems}},[t._l(t.groupData,(function(e,o){return[r("router-link",{key:e.id,staticStyle:{"text-decoration":"none"},attrs:{to:{name:"分组实验列表",params:{project_id:t.project,firstGroup:e.id}}}},[r("el-menu-item",{key:e.id,staticClass:"group",attrs:{index:o+""}},[r("template",{slot:"title"},[t._v(t._s(e.name)+"\n                                "),r("el-dropdown",{staticClass:"editGroup",staticStyle:{"margin-right":"10%"},attrs:{trigger:"hover"}},[r("i",{staticClass:"el-icon-more"}),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{nativeOn:{click:function(r){return t.handleDelFirst(e.id)}}},[t._v("删除")]),r("el-dropdown-item",{nativeOn:{click:function(r){return t.handleEditFirstGroup(e.id,e.name)}}},[t._v("修改")])],1)],1)],1)],2)],1)]}))],2)],1)],1),r("el-dialog",{staticStyle:{width:"60%",left:"20%"},attrs:{title:"新增分组",visible:t.addGroupFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.addGroupFormVisible=e}}},[r("el-form",{ref:"addGroupForm",attrs:{model:t.addGroupForm,"label-width":"80px",rules:t.addGroupFormRules}},[r("el-form-item",{attrs:{label:"分组名称",prop:"firstgroup"}},[r("el-input",{staticStyle:{width:"90%"},attrs:{"auto-complete":"off"},model:{value:t.addGroupForm.firstgroup,callback:function(e){t.$set(t.addGroupForm,"firstgroup","string"===typeof e?e.trim():e)},expression:"addGroupForm.firstgroup"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(e){t.addGroupFormVisible=!1}}},[t._v("取消")]),r("el-button",{attrs:{type:"primary",loading:t.addGroupLoading},nativeOn:{click:function(e){return t.addGroupSubmit(e)}}},[t._v("提交")])],1)],1),r("el-dialog",{staticStyle:{width:"60%",left:"20%"},attrs:{title:"编辑分组",visible:t.editFirstGroupFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editFirstGroupFormVisible=e}}},[r("el-form",{ref:"editFirstGroupForm",attrs:{model:t.editFirstGroupForm,"label-width":"80px",rules:t.editFirstGroupFormRules}},[r("el-form-item",{attrs:{label:"分组名称",prop:"secondFirstGroup"}},[r("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editFirstGroupForm.secondFirstGroup,callback:function(e){t.$set(t.editFirstGroupForm,"secondFirstGroup","string"===typeof e?e.trim():e)},expression:"editFirstGroupForm.secondFirstGroup"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{nativeOn:{click:function(e){t.editFirstGroupFormVisible=!1}}},[t._v("取消")]),r("el-button",{attrs:{type:"primary",loading:t.editFirstGroupLoading},nativeOn:{click:function(e){return t.editFirstGroupSubmit(e)}}},[t._v("提交")])],1)],1),r("el-col",{attrs:{span:20}},[r("div",{staticStyle:{"margin-left":"10px","margin-right":"20px"}},[r("router-view")],1)])],1)],1)},i=[],s=(r("c5f6"),r("4ec3")),a=r("1157"),n=r.n(a),u={data:function(){return{project:"",groupData:[],addGroupFormVisible:!1,addGroupLoading:!1,addFormVisible:!1,addGroupFormRules:{firstgroup:[{required:!1,trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]},addGroupForm:{firstgroup:""},editFirstGroupFormVisible:!1,editFirstGroupLoading:!1,editFirstFormVisible:!1,editFirstGroupFormRules:{secondFirstGroup:[{required:!0,message:"请输入分组名称",trigger:"blur"}]},editFirstGroupForm:{firstgroup:"",secondFirstGroup:"",second_id:""},filters:{name:""},api:[],total:0,page:1,listLoading:!1,sels:[],apiView:!0}},computed:{onRoutes:function(){var t=this.$route.path.lastIndexOf("/"),e=this.$route.path.substring(t+1,this.$route.path.length)[0];return"f"===e?this.$store.state.adminleftnavnum:"all"}},methods:{selectItems:function(t){this.$store.state.adminleftnavnum=t},init:function(){this.addGroupForm.firstgroup=""},getCaseGroup:function(){var t=this;n.a.ajax({type:"get",url:s["p"]+"/api/automation/group",async:!0,data:{project_id:Number(this.$route.params.project_id)},headers:{Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(e){console.log(e.data,"test"),"999999"===e.code?(t.groupData=e.data,t.init()):t.$message.error({message:e.msg,center:!0})}})},handleAddGroup:function(){this.addGroupFormVisible=!0},handleEditFirstGroup:function(t,e){this.editFirstGroupFormVisible=!0,this.editFirstGroupForm.second_id=t,this.editFirstGroupForm.secondFirstGroup=e},addGroupSubmit:function(){var t=this;this.$refs.addGroupForm.validate((function(e){if(e){var r=t;t.$confirm("确认提交吗？","提示",{}).then((function(){r.addGroupLoading=!0,n.a.ajax({type:"post",url:s["p"]+"/api/automation/add_group",async:!0,data:JSON.stringify({project_id:Number(t.$route.params.project_id),name:r.addGroupForm.firstgroup,user_key:JSON.parse(sessionStorage.getItem("name"))}),headers:{"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(t){r.addGroupLoading=!1,"999999"===t.code?(r.$message({message:"添加成功",center:!0,type:"success"}),r.$refs["addGroupForm"].resetFields(),r.addGroupFormVisible=!1,r.getCaseGroup(),r.init()):"999997"===t.code?r.$message.error({message:t.msg,center:!0}):(r.$message.error({message:t.msg,center:!0}),r.$refs["addGroupForm"].resetFields(),r.addGroupFormVisible=!1,r.getCaseGroup(),r.init())}})}))}}))},editFirstGroupSubmit:function(){var t=this;this.$refs.editFirstGroupForm.validate((function(e){if(e){var r=t;t.$confirm("确认提交吗？","提示",{}).then((function(){r.editFirstGroupLoading=!0,n.a.ajax({type:"post",url:s["p"]+"/api/automation/update_name_group",async:!0,data:JSON.stringify({project_id:Number(t.$route.params.project_id),name:r.editFirstGroupForm.secondFirstGroup,id:r.editFirstGroupForm.second_id,user_key:JSON.parse(sessionStorage.getItem("name"))}),headers:{"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(t){r.editFirstGroupLoading=!1,"999999"===t.code?(r.$message({message:"修改成功",center:!0,type:"success"}),r.$refs["editFirstGroupForm"].resetFields(),r.editFirstGroupFormVisible=!1,r.getCaseGroup(),r.init()):"999997"===t.code?r.$message.error({message:t.msg,center:!0}):(r.$message.error({message:t.msg,center:!0}),r.$refs["editFirstGroupForm"].resetFields(),r.editFirstGroupFormVisible=!1,r.getCaseGroup(),r.init())}})}))}}))},handleDelFirst:function(t){var e=this;this.$confirm("确认删除该记录吗?","提示",{type:"warning"}).then((function(){var r=e;n.a.ajax({type:"post",url:s["p"]+"/api/automation/del_group",async:!0,data:JSON.stringify({id:Number(t),project_id:Number(e.$route.params.project_id)}),headers:{"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(t){"999999"===t.code?r.$message({message:"删除成功",center:!0,type:"success"}):r.$message.error({message:t.msg,center:!0}),r.getCaseGroup()}})})).catch((function(){}))}},mounted:function(){this.getCaseGroup(),this.project=this.$route.params.project_id}},d=u,p=(r("5a91"),r("2877")),l=Object(p["a"])(d,o,i,!1,null,"dd435afe",null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-6861dbae.a12ce3dd.js.map