(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72b1cf10"],{"512d":function(e,t,a){"use strict";a("c9d3")},"7e02":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:{name:"用例接口列表",params:{project_id:this.$route.params.project_id,case_id:this.$route.params.case_id}}}},[a("el-button",{staticClass:"return-list"},[a("i",{staticClass:"el-icon-d-arrow-left",staticStyle:{"margin-right":"5px"}}),e._v("返回列表")])],1),a("router-link",{staticStyle:{"text-decoration":"none",color:"aliceblue"},attrs:{to:{name:"用例接口列表",params:{project_id:this.$route.params.project_id,case_id:this.$route.params.case_id}}}},[a("el-button",{staticClass:"return-list",staticStyle:{float:"right"}},[e._v("取消")])],1),a("el-button",{staticClass:"return-list",staticStyle:{float:"right","margin-right":"15px"},attrs:{type:"primary"},nativeOn:{click:function(t){return e.addNewExp(t)}}},[e._v("保存")]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.FormRules}},[a("div",{staticStyle:{border:"1px solid #e6e6e6","margin-bottom":"10px",padding:"15px"}},[a("p",{staticStyle:{"margin-bottom":"0"}},[e._v("测试您的产品的多种变化，注意：当前分流比例不支持。")]),a("br"),a("br"),a("br"),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"abname",label:"实验名称:","label-width":"83px"}},[a("el-input",{attrs:{placeholder:"实验名称","auto-complete":""},model:{value:e.form.abname,callback:function(t){e.$set(e.form,"abname","string"===typeof t?t.trim():t)},expression:"form.abname"}})],1)],1),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{prop:"description",label:"实验描述:","label-width":"83px"}},[a("el-input",{attrs:{placeholder:"实验简单描述","auto-complete":""},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description","string"===typeof t?t.trim():t)},expression:"form.description"}})],1)],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:22}},[a("el-table",{ref:"multipleHeadTable",attrs:{data:e.form.modelData,"highlight-current-row":""},on:{"selection-change":e.selsExp}},[a("el-table-column",{attrs:{"label-class-name":"出错时将只向选择实例发送请求","render-header":e.openAnnotation,type:"selection","min-width":"5%",label:"默认"}}),a("el-table-column",{attrs:{prop:"expName",label:"曝光实例","min-width":"30%","label-class-name":"曝光的实验实例名称","render-header":e.openAnnotation},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{value:t.row.expName,placeholder:"请输入实例名称"},model:{value:t.row.expName,callback:function(a){e.$set(t.row,"expName","string"===typeof a?a.trim():a)},expression:"scope.row.expName"}})]}}])}),a("el-table-column",{attrs:{prop:"exposureNum",label:"曝光率(%)","min-width":"20%","label-class-name":"各实例曝光比例","render-header":e.openAnnotation},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{value:t.row.exposureNum,type:"number",placeholder:"请输入曝光率"},on:{input:function(a){return e.inputChange(t.row)}},model:{value:t.row.exposureNum,callback:function(a){e.$set(t.row,"exposureNum",a)},expression:"scope.row.exposureNum"}})]}}])}),a("el-table-column",{attrs:{prop:"name",label:"已部署模型","min-width":"30%","label-class-name":"根据增强模型动态生成选择模型并返回结果。如果指定了 '无模型'，则返回实例名称","render-header":e.openAnnotation},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{value:t.row.name,placeholder:"请输入模型"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name","string"===typeof a?a.trim():a)},expression:"scope.row.name"}})]}}])}),a("el-table-column",{attrs:{label:"","min-width":"10%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"30px",cursor:"pointer"},on:{click:function(a){return e.delModelHead(t.$index)}}})]}}])}),a("el-table-column",{staticStyle:{"margin-right":"6px"},attrs:{label:"","min-width":"15%"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.$index===e.form.modelData.length-1?a("el-button",{staticClass:"el-icon-plus",attrs:{size:"mini"},on:{click:e.addModelHead}}):e._e()]}}])})],1)],1)],1),a("br")],1)])],1)},r=[],s=(a("a481"),a("4f7f"),a("5df3"),a("1c4c"),a("c5f6"),a("7f7f"),a("ac6a"),a("4ec3")),n=a("1157"),i=a.n(n),l={data:function(){return{groupData:[],apiListLoading:!1,baseExpSelected:[],oldNum:50,ABTypeSelected:"mlExp",activeIndex:"",searchApiList:[],searchApiListG:{},radio:"genExp",page:1,total:0,searchApiVisible:!1,ApiList:[],showCheck:!1,sels:[],interrelateObjects:"",form:{abname:"",description:"",modelData:[{expName:"",name:"No Model",exposureNum:50}]},FormRules:{name:[{required:!0,message:"请输入实验用例名称",trigger:"blur"}],altlist:[{required:!0,message:"请输入待测试的模型列表",trigger:"blur"}]}}},methods:{inputChange:function(e){console.log(e,"obj")},addModelHead:function(){var e={name:"No Model",exposureNum:50,expName:"exp_name"};this.form.modelData.push(e)},delModelHead:function(e){1!==this.form.modelData.length&&this.form.modelData.splice(e,1)},handleSelect:function(e,t){this.activeIndex=e,console.log(this.activeIndex)},handleCurrentChangeApi:function(e){this.activeIndex["id"],this.page=e,this.getApiList()},getApiGroup:function(){var e=this;i.a.ajax({type:"get",url:s["p"]+"/api/api/group",async:!0,data:{project_id:this.$route.params.project_id},headers:{Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(t){"999999"===t.code?(e.groupData=t.data,e.groupData.forEach((function(t){e.searchApiListG[t.id]=t.name}))):e.$message.error({message:t.msg,center:!0})}})},getApiList:function(e){this.apiListLoading=!0;var t=this,a={project_id:Number(this.$route.params.project_id),page:t.page};e&&(a["apiGroupLevelFirst_id"]=Number(e)),i.a.ajax({type:"get",url:s["p"]+"/api/api/api_list",async:!0,data:a,headers:{Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(e){t.apiListLoading=!1,"999999"===e.code?(t.searchApiList=e.data.data,t.total=e.data.total,console.log(t.searchApiList,"searchApiList")):t.$message.error({message:e.msg,center:!0})}})},handleCurrentChange:function(e){this.currentRow=e},selsExp:function(e){this.baseExpSelected=e},selsChange:function(e){var t=this;this.sels=e,1===e.length&&""===this.form.modelData[0].expName&&this.form.modelData.splice(0,1),e.forEach((function(e){e.exposureNum=50,e.expName=e.name,t.form.modelData.push(e),t.form.modelData=Array.from(new Set(t.form.modelData))})),console.log(this.sels,"this.sels")},addNewExp:function(){var e=this,t=this;console.log(t.form,this.radio,this.baseExpSelected,"sfkk"),this.$refs.form.validate((function(t){if(t){var a=e;e.$confirm("确认提交实验吗？","提示",{}).then((function(){var e=JSON.stringify({project_id:Number(a.$route.params.project_id),automationTestCase_id:Number(a.$route.params.case_id),abname:a.form.abname,expRegData:a.form.modelData,appType:a.radio,baseExpSelected:a.baseExpSelected,description:a.form.description});i.a.ajax({type:"post",url:s["p"]+"/api/automation/add_new_api",async:!0,data:e,headers:{"Content-Type":"application/json",Authorization:"Token "+JSON.parse(sessionStorage.getItem("token"))},timeout:5e3,success:function(e){"999999"===e.code?(a.$router.push({name:"用例接口列表",params:{project_id:a.$route.params.project_id,case_id:a.$route.params.case_id}}),a.$message({message:"保存成功",center:!0,type:"success"})):a.$message.error({message:e.msg,center:!0})}})})).catch((function(){}))}}))},changABType:function(e){this.ABTypeSelected=e,console.log(e,"abval")},handleChange:function(e){},openAnnotation:function(e,t){var a=t.column;t.$index;return e("el-tooltip",{class:"item",attrs:{effect:"dark",content:a.labelClassName,placement:"top"}},[e("span",[a.label])])}},watch:{radio:function(e){this.changABType(e)},form:{handler:function(e,t){"no_check"===e.check?this.showCheck=!1:this.showCheck=!0},deep:!0}},computed:{exposureNumSelected:{get:function(){return this.oldNum},set:function(e){this.oldNum=e.replace(/[^\d]/g,"")}}},mounted:function(){this.searchApiListVisible=!0,this.getApiGroup(),this.getApiList()}},c=l,p=(a("512d"),a("f158"),a("2877")),u=Object(p["a"])(c,o,r,!1,null,"b92789fa",null);t["default"]=u.exports},b5bf:function(e,t,a){},c9d3:function(e,t,a){},f158:function(e,t,a){"use strict";a("b5bf")}}]);
//# sourceMappingURL=chunk-72b1cf10.127a5cbc.js.map