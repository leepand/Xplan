{"version":3,"sources":["webpack:///./src/views/project/abtest/AddCaseApi.vue?91ab","webpack:///./src/views/project/abtest/AddCaseApi.vue?7ac6","webpack:///src/views/project/abtest/AddCaseApi.vue","webpack:///./src/views/project/abtest/AddCaseApi.vue?b7a2","webpack:///./src/views/project/abtest/AddCaseApi.vue","webpack:///./src/views/project/abtest/AddCaseApi.vue?fbd5"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","name","params","project_id","$route","case_id","staticClass","_v","nativeOn","$event","addNewExp","ref","form","FormRules","model","value","callback","$$v","$set","trim","expression","modelData","on","selsExp","openAnnotation","scopedSlots","_u","key","fn","scope","row","expName","exposureNum","inputChange","delModelHead","$index","length","addModelHead","_e","staticRenderFns","data","groupData","apiListLoading","baseExpSelected","oldNum","ABTypeSelected","activeIndex","searchApiList","searchApiListG","radio","page","total","searchApiVisible","ApiList","showCheck","sels","interrelateObjects","abname","description","altlist","methods","console","log","obj","push","headers","splice","index","handleSelect","handleCurrentChangeApi","val","getApiList","getApiGroup","type","url","async","Authorization","JSON","parse","sessionStorage","getItem","timeout","success","code","self","forEach","item","id","$message","error","message","msg","center","_list","param","Number","handleCurrentChange","currentRow","selsChange","$refs","validate","valid","automationTestCase_id","expRegData","appType","changABType","handleChange","watch","handler","curVal","check","deep","computed","exposureNumSelected","get","set","newValue","replace","mounted","searchApiListVisible","component"],"mappings":"kHAAA,W,2CCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACA,EAAG,cAAc,CAACE,YAAY,CAAC,kBAAkB,OAAO,MAAQ,aAAaC,MAAM,CAAC,GAAK,CAAEC,KAAM,SAAUC,OAAQ,CAACC,WAAYT,KAAKU,OAAOF,OAAOC,WAAWE,QAASX,KAAKU,OAAOF,OAAOG,YAAY,CAACR,EAAG,YAAY,CAACS,YAAY,eAAe,CAACT,EAAG,IAAI,CAACS,YAAY,uBAAuBP,YAAY,CAAC,eAAe,SAASN,EAAIc,GAAG,WAAW,GAAGV,EAAG,cAAc,CAACE,YAAY,CAAC,kBAAkB,OAAO,MAAQ,aAAaC,MAAM,CAAC,GAAK,CAAEC,KAAM,SAAUC,OAAQ,CAACC,WAAYT,KAAKU,OAAOF,OAAOC,WAAWE,QAASX,KAAKU,OAAOF,OAAOG,YAAY,CAACR,EAAG,YAAY,CAACS,YAAY,cAAcP,YAAY,CAAC,MAAQ,UAAU,CAACN,EAAIc,GAAG,SAAS,GAAGV,EAAG,YAAY,CAACS,YAAY,cAAcP,YAAY,CAAC,MAAQ,QAAQ,eAAe,QAAQC,MAAM,CAAC,KAAO,WAAWQ,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAIiB,UAAUD,MAAW,CAAChB,EAAIc,GAAG,QAAQV,EAAG,UAAU,CAACc,IAAI,OAAOX,MAAM,CAAC,MAAQP,EAAImB,KAAK,MAAQnB,EAAIoB,YAAY,CAAChB,EAAG,MAAM,CAACE,YAAY,CAAC,OAAS,oBAAoB,gBAAgB,OAAO,QAAU,SAAS,CAACF,EAAG,IAAI,CAACE,YAAY,CAAC,gBAAgB,MAAM,CAACN,EAAIc,GAAG,+BAA+BV,EAAG,MAAMA,EAAG,MAAMA,EAAG,MAAMA,EAAG,SAAS,CAACG,MAAM,CAAC,OAAS,KAAK,CAACH,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,IAAI,CAACH,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,SAAS,MAAQ,QAAQ,cAAc,SAAS,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,YAAc,OAAO,gBAAgB,IAAIc,MAAM,CAACC,MAAOtB,EAAImB,KAAW,OAAEI,SAAS,SAAUC,GAAMxB,EAAIyB,KAAKzB,EAAImB,KAAM,SAA0B,kBAARK,EAAkBA,EAAIE,OAAQF,IAAOG,WAAW,kBAAkB,IAAI,GAAGvB,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,KAAK,CAACH,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,cAAc,MAAQ,QAAQ,cAAc,SAAS,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,YAAc,SAAS,gBAAgB,IAAIc,MAAM,CAACC,MAAOtB,EAAImB,KAAgB,YAAEI,SAAS,SAAUC,GAAMxB,EAAIyB,KAAKzB,EAAImB,KAAM,cAA+B,kBAARK,EAAkBA,EAAIE,OAAQF,IAAOG,WAAW,uBAAuB,IAAI,IAAI,GAAGvB,EAAG,SAAS,CAACG,MAAM,CAAC,OAAS,KAAK,CAACH,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,KAAK,CAACH,EAAG,WAAW,CAACc,IAAI,oBAAoBX,MAAM,CAAC,KAAOP,EAAImB,KAAKS,UAAU,wBAAwB,IAAIC,GAAG,CAAC,mBAAmB7B,EAAI8B,UAAU,CAAC1B,EAAG,kBAAkB,CAACG,MAAM,CAAC,mBAAmB,iBAAiB,gBAAgBP,EAAI+B,eAAe,KAAO,YAAY,YAAY,KAAK,MAAQ,QAAQ3B,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,UAAU,MAAQ,OAAO,YAAY,MAAM,mBAAmB,YAAY,gBAAgBP,EAAI+B,gBAAgBC,YAAYhC,EAAIiC,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAAChC,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ6B,EAAMC,IAAIC,QAAQ,YAAc,WAAWjB,MAAM,CAACC,MAAOc,EAAMC,IAAW,QAAEd,SAAS,SAAUC,GAAMxB,EAAIyB,KAAKW,EAAMC,IAAK,UAA2B,kBAARb,EAAkBA,EAAIE,OAAQF,IAAOG,WAAW,8BAA8BvB,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,cAAc,MAAQ,SAAS,YAAY,MAAM,mBAAmB,UAAU,gBAAgBP,EAAI+B,gBAAgBC,YAAYhC,EAAIiC,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAAChC,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ6B,EAAMC,IAAIE,YAAY,KAAO,SAAS,YAAc,UAAUV,GAAG,CAAC,MAAQ,SAASb,GAAQ,OAAOhB,EAAIwC,YAAYJ,EAAMC,OAAOhB,MAAM,CAACC,MAAOc,EAAMC,IAAe,YAAEd,SAAS,SAAUC,GAAMxB,EAAIyB,KAAKW,EAAMC,IAAK,cAAeb,IAAMG,WAAW,kCAAkCvB,EAAG,kBAAkB,CAACG,MAAM,CAAC,KAAO,OAAO,MAAQ,QAAQ,YAAY,MAAM,mBAAmB,0CAA0C,gBAAgBP,EAAI+B,gBAAgBC,YAAYhC,EAAIiC,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAAChC,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ6B,EAAMC,IAAI7B,KAAK,YAAc,SAASa,MAAM,CAACC,MAAOc,EAAMC,IAAQ,KAAEd,SAAS,SAAUC,GAAMxB,EAAIyB,KAAKW,EAAMC,IAAK,OAAwB,kBAARb,EAAkBA,EAAIE,OAAQF,IAAOG,WAAW,2BAA2BvB,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,GAAG,YAAY,OAAOyB,YAAYhC,EAAIiC,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAAChC,EAAG,IAAI,CAACS,YAAY,iBAAiBP,YAAY,CAAC,YAAY,OAAO,OAAS,WAAWuB,GAAG,CAAC,MAAQ,SAASb,GAAQ,OAAOhB,EAAIyC,aAAaL,EAAMM,mBAAmBtC,EAAG,kBAAkB,CAACE,YAAY,CAAC,eAAe,OAAOC,MAAM,CAAC,MAAQ,GAAG,YAAY,OAAOyB,YAAYhC,EAAIiC,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAAO,MAAO,CAAEA,EAAMM,SAAU1C,EAAImB,KAAKS,UAAUe,OAAO,EAAIvC,EAAG,YAAY,CAACS,YAAY,eAAeN,MAAM,CAAC,KAAO,QAAQsB,GAAG,CAAC,MAAQ7B,EAAI4C,gBAAgB5C,EAAI6C,aAAa,IAAI,IAAI,GAAGzC,EAAG,OAAO,MAAM,IACnzI0C,EAAkB,G,yGCuFtB,GACEC,KADF,WAEI,MAAO,CACLC,UAAW,GACXC,gBAAgB,EAChBC,gBAAiB,GACjBC,OAAQ,GACRC,eAAgB,QAChBC,YAAa,GACbC,cAAe,GACfC,eAAgB,GAEhBC,MAAO,SACPC,KAAM,EACNC,MAAO,EACPC,kBAAkB,EAClBC,QAAS,GACTC,WAAW,EACXC,KAAM,GACNC,mBAAoB,GACpB5C,KAAM,CACJ6C,OAAQ,GACRC,YAAa,GACbrC,UAAW,CAAC,CAApB,6CAEMR,UAAW,CACTZ,KAAM,CAAC,CAAf,iDACQ0D,QAAS,CAAC,CAAlB,sDAIEC,QAAS,CACP3B,YADJ,SACA,GACM4B,QAAQC,IAAIC,EAAK,QAEnB1B,aAJJ,WAKM,IAAN,sDACM3C,KAAKkB,KAAKS,UAAU2C,KAAKC,IAK3B/B,aAXJ,SAWA,GACyC,IAA/BxC,KAAKkB,KAAKS,UAAUe,QACtB1C,KAAKkB,KAAKS,UAAU6C,OAAOC,EAAO,IAGtCC,aAhBJ,SAgBA,KACM1E,KAAKoD,YAAcnB,EACnBkC,QAAQC,IAAIpE,KAAKoD,cAGnBuB,uBArBJ,SAqBA,GAEU3E,KAAKoD,YAAY,MACnBpD,KAAKwD,KAAOoB,EACZ5E,KAAK6E,cASTC,YAlCJ,WAmCM,IAAN,OACM,EAAN,QACQC,KAAM,MACNC,IAAK,EAAb,sBACQC,OAAO,EACPnC,KAAM,CAAd,0CACQyB,QAAS,CACPW,cAAe,SAAWC,KAAKC,MAAMC,eAAeC,QAAQ,WAE9DC,QAAS,IACTC,QAAS,SAAjB,GAC4B,WAAd1C,EAAK2C,MACPC,EAAK3C,UAAYD,EAAKA,KACtB4C,EAAK3C,UAAU4C,SAAQ,SAAnC,GACcD,EAAKpC,eAAesC,EAAKC,IAAMD,EAAKrF,SAItCmF,EAAKI,SAASC,MAAM,CAClBC,QAASlD,EAAKmD,IACdC,QAAQ,QAMlBrB,WA7DJ,SA6DA,GACM7E,KAAKgD,gBAAiB,EACtB,IAAN,OACA,iEACUmD,IACFC,EAAM,yBAA2BC,OAAOF,IAE1C,EAAN,QACQpB,KAAM,MACNC,IAAK,EAAb,yBACQC,OAAO,EACPnC,KAAMsD,EACN7B,QAAS,CACPW,cAAe,SAAWC,KAAKC,MAAMC,eAAeC,QAAQ,WAE9DC,QAAS,IACTC,QAAS,SAAjB,GACUE,EAAK1C,gBAAiB,EACJ,WAAdF,EAAK2C,MACPC,EAAKrC,cAAgBP,EAAKA,KAAKA,KAC/B4C,EAAKjC,MAAQX,EAAKA,KAAKW,MACvBU,QAAQC,IAAIsB,EAAKrC,cAAe,kBAEhCqC,EAAKI,SAASC,MAAM,CAClBC,QAASlD,EAAKmD,IACdC,QAAQ,QAOlBI,oBA7FJ,SA6FA,GACMtG,KAAKuG,WAAa3B,GAEpB/C,QAhGJ,SAgGA,GACM7B,KAAKiD,gBAAkBY,GAEzB2C,WAnGJ,SAmGA,cACMxG,KAAK6D,KAAOA,EACQ,IAAhBA,EAAKnB,QAAmD,KAAnC1C,KAAKkB,KAAKS,UAAU,GAAGU,SAE9CrC,KAAKkB,KAAKS,UAAU6C,OAAO,EAAG,GAEhCX,EAAK8B,SAAQ,SAAnB,GACQC,EAAKtD,YAAc,GACnBsD,EAAKvD,QAAUuD,EAAKrF,KACpB,EAAR,uBACQ,EAAR,wDAGM4D,QAAQC,IAAIpE,KAAK6D,KAAM,cAEzB7C,UAlHJ,WAkHA,WACA,OACMmD,QAAQC,IAAIsB,EAAKxE,KAAMlB,KAAKuD,MAAOvD,KAAKiD,gBAAiB,QACzDjD,KAAKyG,MAAMvF,KAAKwF,UAAS,SAA/B,GACQ,GAAIC,EAAO,CACT,IAAV,IACU,EAAV,8CACY,IAAZ,kBACclG,WAAY4F,OAAO,EAAjC,0BACcO,sBAAuBP,OAAO,EAA5C,uBACctC,OAAQ,EAAtB,YACc8C,WAAY,EAA1B,eACcC,QAAS,EAAvB,MACc7D,gBAAiB,EAA/B,gBACce,YAAa,EAA3B,mBAEY,EAAZ,QACce,KAAM,OACNC,IAAK,EAAnB,mCACcC,OAAO,EACPnC,KAAMsD,EACN7B,QAAS,CACP,eAAgB,mBAChBW,cAAe,SAAWC,KAAKC,MAAMC,eAAeC,QAAQ,WAE9DC,QAAS,IACTC,QAAS,SAAvB,GACkC,WAAd1C,EAAK2C,MACP,EAAlB,4BACoBjF,OAAQ,CAA5B,sCACsBG,QAAS,EAA/B,yBACkB,EAAlB,UACoBqF,QAAS,OACTE,QAAQ,EACRnB,KAAM,aAGR,EAAlB,gBACoBiB,QAASlD,EAAKmD,IACdC,QAAQ,UAK5B,2BAQIa,YAtKJ,SAsKA,GACM/G,KAAKmD,eAAiByB,EACtBT,QAAQC,IAAIQ,EAAK,UAEnBoC,aA1KJ,SA0KA,KAEIlF,eAAgB,SAApB,6BACM,OAAO,EAAb,oBACA,OADA,cACA,OADA,QACA,iBADA,UACA,QADA,WAEA,cAKEmF,MAAO,CACL1D,MADJ,SACA,GACMvD,KAAK+G,YAAYnC,IAEnB1D,KAAM,CAEJgG,QAFN,SAEA,KAC6B,aAAjBC,EAAOC,MACTpH,KAAK4D,WAAY,EAEjB5D,KAAK4D,WAAY,GAGrByD,MAAM,IAGVC,SAAU,CACRC,oBAAqB,CACnBC,IAAK,WACH,OAAOxH,KAAKkD,QAEduE,IAAK,SAAX,GACQzH,KAAKkD,OAASwE,EAASC,QAAQ,SAAU,OAI/CC,QA7OF,WA8OI5H,KAAK6H,sBAAuB,EAC5B7H,KAAK8E,cACL9E,KAAK6E,eCxUyW,I,kCCS9WiD,EAAY,eACd,EACAhI,EACA+C,GACA,EACA,KACA,WACA,MAIa,aAAAiF,E,yFCpBf","file":"js/chunk-72b1cf10.127a5cbc.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCaseApi.vue?vue&type=style&index=0&id=b92789fa&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('router-link',{staticStyle:{\"text-decoration\":\"none\",\"color\":\"aliceblue\"},attrs:{\"to\":{ name: '用例接口列表', params: {project_id: this.$route.params.project_id,case_id: this.$route.params.case_id}}}},[_c('el-button',{staticClass:\"return-list\"},[_c('i',{staticClass:\"el-icon-d-arrow-left\",staticStyle:{\"margin-right\":\"5px\"}}),_vm._v(\"返回列表\")])],1),_c('router-link',{staticStyle:{\"text-decoration\":\"none\",\"color\":\"aliceblue\"},attrs:{\"to\":{ name: '用例接口列表', params: {project_id: this.$route.params.project_id,case_id: this.$route.params.case_id}}}},[_c('el-button',{staticClass:\"return-list\",staticStyle:{\"float\":\"right\"}},[_vm._v(\"取消\")])],1),_c('el-button',{staticClass:\"return-list\",staticStyle:{\"float\":\"right\",\"margin-right\":\"15px\"},attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.addNewExp($event)}}},[_vm._v(\"保存\")]),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.FormRules}},[_c('div',{staticStyle:{\"border\":\"1px solid #e6e6e6\",\"margin-bottom\":\"10px\",\"padding\":\"15px\"}},[_c('p',{staticStyle:{\"margin-bottom\":\"0\"}},[_vm._v(\"测试您的产品的多种变化，注意：当前分流比例不支持。\")]),_c('br'),_c('br'),_c('br'),_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"prop\":\"abname\",\"label\":\"实验名称:\",\"label-width\":\"83px\"}},[_c('el-input',{attrs:{\"placeholder\":\"实验名称\",\"auto-complete\":\"\"},model:{value:(_vm.form.abname),callback:function ($$v) {_vm.$set(_vm.form, \"abname\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.abname\"}})],1)],1),_c('el-col',{attrs:{\"span\":14}},[_c('el-form-item',{attrs:{\"prop\":\"description\",\"label\":\"实验描述:\",\"label-width\":\"83px\"}},[_c('el-input',{attrs:{\"placeholder\":\"实验简单描述\",\"auto-complete\":\"\"},model:{value:(_vm.form.description),callback:function ($$v) {_vm.$set(_vm.form, \"description\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"form.description\"}})],1)],1)],1),_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":22}},[_c('el-table',{ref:\"multipleHeadTable\",attrs:{\"data\":_vm.form.modelData,\"highlight-current-row\":\"\"},on:{\"selection-change\":_vm.selsExp}},[_c('el-table-column',{attrs:{\"label-class-name\":\"出错时将只向选择实例发送请求\",\"render-header\":_vm.openAnnotation,\"type\":\"selection\",\"min-width\":\"5%\",\"label\":\"默认\"}}),_c('el-table-column',{attrs:{\"prop\":\"expName\",\"label\":\"曝光实例\",\"min-width\":\"30%\",\"label-class-name\":\"曝光的实验实例名称\",\"render-header\":_vm.openAnnotation},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"value\":scope.row.expName,\"placeholder\":\"请输入实例名称\"},model:{value:(scope.row.expName),callback:function ($$v) {_vm.$set(scope.row, \"expName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"scope.row.expName\"}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"exposureNum\",\"label\":\"曝光率(%)\",\"min-width\":\"20%\",\"label-class-name\":\"各实例曝光比例\",\"render-header\":_vm.openAnnotation},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"value\":scope.row.exposureNum,\"type\":\"number\",\"placeholder\":\"请输入曝光率\"},on:{\"input\":function($event){return _vm.inputChange(scope.row)}},model:{value:(scope.row.exposureNum),callback:function ($$v) {_vm.$set(scope.row, \"exposureNum\", $$v)},expression:\"scope.row.exposureNum\"}})]}}])}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"已部署模型\",\"min-width\":\"30%\",\"label-class-name\":\"根据增强模型动态生成选择模型并返回结果。如果指定了 '无模型'，则返回实例名称\",\"render-header\":_vm.openAnnotation},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-input',{attrs:{\"value\":scope.row.name,\"placeholder\":\"请输入模型\"},model:{value:(scope.row.name),callback:function ($$v) {_vm.$set(scope.row, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"scope.row.name\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"\",\"min-width\":\"10%\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('i',{staticClass:\"el-icon-delete\",staticStyle:{\"font-size\":\"30px\",\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.delModelHead(scope.$index)}}})]}}])}),_c('el-table-column',{staticStyle:{\"margin-right\":\"6px\"},attrs:{\"label\":\"\",\"min-width\":\"15%\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.$index===(_vm.form.modelData.length-1))?_c('el-button',{staticClass:\"el-icon-plus\",attrs:{\"size\":\"mini\"},on:{\"click\":_vm.addModelHead}}):_vm._e()]}}])})],1)],1)],1),_c('br')],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <section>\n        <router-link :to=\"{ name: '用例接口列表', params: {project_id: this.$route.params.project_id,case_id: this.$route.params.case_id}}\" style='text-decoration: none;color: aliceblue;'>\n            <el-button class=\"return-list\"><i class=\"el-icon-d-arrow-left\" style=\"margin-right: 5px\"></i>返回列表</el-button>\n        </router-link>\n        <router-link :to=\"{ name: '用例接口列表', params: {project_id: this.$route.params.project_id,case_id: this.$route.params.case_id}}\" style='text-decoration: none;color: aliceblue;'>\n            <el-button class=\"return-list\" style=\"float: right\">取消</el-button>\n        </router-link>\n        <el-button class=\"return-list\" type=\"primary\" style=\"float: right; margin-right: 15px\" @click.native=\"addNewExp\">保存</el-button>\n        <el-form :model=\"form\" ref=\"form\" :rules=\"FormRules\">\n            <div style=\"border: 1px solid #e6e6e6;margin-bottom: 10px;padding:15px\">\n                <p style=\"margin-bottom: 0;\">测试您的产品的多种变化，注意：当前分流比例不支持。</p>\n                <br>\n                <br>\n                <br>\n                <el-row :gutter=\"10\">\n                    <el-col :span='8'>\n                        <el-form-item prop=\"abname\" label=\"实验名称:\" label-width=\"83px\">\n                            <el-input v-model.trim=\"form.abname\" placeholder=\"实验名称\" auto-complete></el-input>\n                        </el-form-item>\n                    </el-col>\n                    <el-col :span='14'>\n                        <el-form-item prop=\"description\" label=\"实验描述:\" label-width=\"83px\">\n                            <el-input v-model.trim=\"form.description\" placeholder=\"实验简单描述\" auto-complete></el-input>\n                        </el-form-item>\n                    </el-col>\n                </el-row>\n                <el-row :gutter=\"10\">\n                    <el-col :span='22'>\n                     <el-table :data=\"form.modelData\" highlight-current-row ref=\"multipleHeadTable\"\n                               @selection-change=\"selsExp\">\n                            <el-table-column label-class-name=\"出错时将只向选择实例发送请求\"\n                                             :render-header=\"openAnnotation\"\n                                             type=\"selection\"\n                                             min-width=\"5%\" label=\"默认\">\n                            </el-table-column>\n                            <el-table-column  prop=\"expName\"\n                                             label=\"曝光实例\"\n                                             min-width=\"30%\"\n                                             label-class-name=\"曝光的实验实例名称\"\n                                             :render-header=\"openAnnotation\"\n                                             >\n                                <template slot-scope=\"scope\">\n                                    <el-input v-model.trim=\"scope.row.expName\" :value=\"scope.row.expName\" placeholder=\"请输入实例名称\"></el-input>\n                                </template>\n                            </el-table-column>\n                            <el-table-column prop=\"exposureNum\"\n                                             label=\"曝光率(%)\" min-width=\"20%\"\n                                             label-class-name=\"各实例曝光比例\"\n                                             :render-header=\"openAnnotation\">\n                                <template slot-scope=\"scope\">\n                                    <el-input v-model=\"scope.row.exposureNum\"\n                                              :value=\"scope.row.exposureNum\"\n                                              type=\"number\"\n                                              @input=\"inputChange(scope.row)\"\n                                              placeholder=\"请输入曝光率\"></el-input>\n                                </template>\n                            </el-table-column>\n                            <el-table-column  prop=\"name\"\n                                             label=\"已部署模型\" min-width=\"30%\"\n                                             label-class-name=\"根据增强模型动态生成选择模型并返回结果。如果指定了 '无模型'，则返回实例名称\"\n                                             :render-header=\"openAnnotation\"\n                                             >\n                                <template slot-scope=\"scope\">\n                                    <el-input v-model.trim=\"scope.row.name\" :value=\"scope.row.name\" placeholder=\"请输入模型\"></el-input>\n                                </template>\n                            </el-table-column>\n                            <el-table-column label=\"\" min-width=\"10%\">\n                                <template slot-scope=\"scope\">\n                                    <i class=\"el-icon-delete\" style=\"font-size:30px;cursor:pointer;\" @click=\"delModelHead(scope.$index)\"></i>\n                                </template>\n                            </el-table-column>\n                            <el-table-column label=\"\" min-width=\"15%\" style=\"margin-right:6px\">\n                                <template slot-scope=\"scope\">\n                                    <el-button v-if=\"scope.$index===(form.modelData.length-1)\" size=\"mini\" class=\"el-icon-plus\" @click=\"addModelHead\"></el-button>\n                                </template>\n                            </el-table-column>\n                        </el-table>\n                    </el-col>\n                </el-row>\n                <br>\n        </div>\n    </el-form>\n    </section>\n</template>\n<script>\nimport { test } from '../../../api/api'\nimport $ from 'jquery'\nexport default {\n  data () {\n    return {\n      groupData: [],\n      apiListLoading: false,\n      baseExpSelected: [],\n      oldNum: 50,\n      ABTypeSelected: 'mlExp',\n      activeIndex: '',\n      searchApiList: [],\n      searchApiListG: {},\n      // radio: 'mlExp',\n      radio: 'genExp',\n      page: 1,\n      total: 0,\n      searchApiVisible: false,\n      ApiList: [],\n      showCheck: false,\n      sels: [], // 列表选中列\n      interrelateObjects: '',\n      form: {\n        abname: '',\n        description: '',\n        modelData: [{ expName: '', name: 'No Model', exposureNum: 50 }]\n      },\n      FormRules: {\n        name: [{ required: true, message: '请输入实验用例名称', trigger: 'blur' }],\n        altlist: [{ required: true, message: '请输入待测试的模型列表', trigger: 'blur' }]\n      }\n    }\n  },\n  methods: {\n    inputChange (obj) {\n      console.log(obj, 'obj')\n    },\n    addModelHead () {\n      let headers = { name: 'No Model', exposureNum: 50, expName: 'exp_name' }\n      this.form.modelData.push(headers)\n      // let rows = [this.form.modelData[this.form.modelData.length - 1]]\n      // this.form.modelData[this.form.modelData.length-1].exposureNum=50\n      // this.toggleHeadSelection(rows)\n    },\n    delModelHead (index) {\n      if (this.form.modelData.length !== 1) {\n        this.form.modelData.splice(index, 1)\n      }\n    },\n    handleSelect (key, keyPath) {\n      this.activeIndex = key\n      console.log(this.activeIndex)\n    },\n\n    handleCurrentChangeApi (val) {\n      // console.log(this.groupData[this.activeIndex][\"id\"]);\n      if (this.activeIndex['id']) {\n        this.page = val\n        this.getApiList()\n        // this.getApiList(this.groupData[this.activeIndex][\"id\"])\n      } else {\n        this.page = val\n        this.getApiList()\n      }\n    },\n\n    // 获取api分组\n    getApiGroup () {\n      let self = this\n      $.ajax({\n        type: 'get',\n        url: test + '/api/api/group',\n        async: true,\n        data: { project_id: this.$route.params.project_id },\n        headers: {\n          Authorization: 'Token ' + JSON.parse(sessionStorage.getItem('token'))\n        },\n        timeout: 5000,\n        success: function (data) {\n          if (data.code === '999999') {\n            self.groupData = data.data\n            self.groupData.forEach((item) => {\n              self.searchApiListG[item.id] = item.name\n              // console.log(self.searchApiListG,\"this.searchApiListG\")\n            })\n          } else {\n            self.$message.error({\n              message: data.msg,\n              center: true\n            })\n          }\n        }\n      })\n    },\n    getApiList (_list) {\n      this.apiListLoading = true\n      let self = this\n      let param = { project_id: Number(this.$route.params.project_id), page: self.page }\n      if (_list) {\n        param['apiGroupLevelFirst_id'] = Number(_list)\n      }\n      $.ajax({\n        type: 'get',\n        url: test + '/api/api/api_list',\n        async: true,\n        data: param,\n        headers: {\n          Authorization: 'Token ' + JSON.parse(sessionStorage.getItem('token'))\n        },\n        timeout: 5000,\n        success: function (data) {\n          self.apiListLoading = false\n          if (data.code === '999999') {\n            self.searchApiList = data.data.data\n            self.total = data.data.total\n            console.log(self.searchApiList, 'searchApiList')\n          } else {\n            self.$message.error({\n              message: data.msg,\n              center: true\n            })\n          }\n        }\n      })\n    },\n\n    handleCurrentChange (val) {\n      this.currentRow = val\n    },\n    selsExp (sels) {\n      this.baseExpSelected = sels\n    },\n    selsChange (sels) {\n      this.sels = sels\n      if (sels.length === 1 && this.form.modelData[0].expName === '') {\n        // 删除第一个空记录\n        this.form.modelData.splice(0, 1)\n      }\n      sels.forEach((item) => {\n        item.exposureNum = 50\n        item.expName = item.name\n        this.form.modelData.push(item)\n        this.form.modelData = Array.from(new Set(this.form.modelData))\n      })\n\n      console.log(this.sels, 'this.sels')\n    },\n    addNewExp () {\n      let self = this\n      console.log(self.form, this.radio, this.baseExpSelected, 'sfkk')\n      this.$refs.form.validate((valid) => {\n        if (valid) {\n          let self = this\n          this.$confirm('确认提交实验吗？', '提示', {}).then(() => {\n            let param = JSON.stringify({\n              project_id: Number(self.$route.params.project_id),\n              automationTestCase_id: Number(self.$route.params.case_id),\n              abname: self.form.abname,\n              expRegData: self.form.modelData,\n              appType: self.radio,\n              baseExpSelected: self.baseExpSelected,\n              description: self.form.description// \"A/B exp create\"\n            })\n            $.ajax({\n              type: 'post',\n              url: test + '/api/automation/add_new_api',\n              async: true,\n              data: param,\n              headers: {\n                'Content-Type': 'application/json',\n                Authorization: 'Token ' + JSON.parse(sessionStorage.getItem('token'))\n              },\n              timeout: 5000,\n              success: function (data) {\n                if (data.code === '999999') {\n                  self.$router.push({ name: '用例接口列表',\n                    params: { project_id: self.$route.params.project_id,\n                      case_id: self.$route.params.case_id } })\n                  self.$message({\n                    message: '保存成功',\n                    center: true,\n                    type: 'success'\n                  })\n                } else {\n                  self.$message.error({\n                    message: data.msg,\n                    center: true\n                  })\n                }\n              }\n            })\n          }).catch(() => {\n          })\n        }\n      })\n    },\n\n    // addApi: function () {\n    // header 需要\"Content-Type\": \"application/json\"\n    changABType (val) {\n      this.ABTypeSelected = val\n      console.log(val, 'abval')\n    },\n    handleChange (val) {\n    },\n    openAnnotation: function (h, { column, $index }) {\n      return (\n        <el-tooltip class=\"item\" effect=\"dark\" content={column.labelClassName} placement=\"top\">\n          <span>{column.label}</span>\n        </el-tooltip>\n      )\n    }\n  },\n  watch: {\n    radio (val) {\n      this.changABType(val)\n    },\n    form: {\n      // 注意：当观察的数据为对象或数组时，curVal和oldVal是相等的，因为这两个形参指向的是同一个数据对象\n      handler (curVal, oldVal) {\n        if (curVal.check === 'no_check') {\n          this.showCheck = false\n        } else {\n          this.showCheck = true\n        }\n      },\n      deep: true\n    }\n  },\n  computed: {\n    exposureNumSelected: {\n      get: function () {\n        return this.oldNum\n      },\n      set: function (newValue) {\n        this.oldNum = newValue.replace(/[^\\d]/g, '')\n      }\n    }\n  },\n  mounted () {\n    this.searchApiListVisible = true\n    this.getApiGroup()\n    this.getApiList()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n    p {\n        margin: 0 0 10px;\n    }\n    .return-list {\n        margin-top: 0px;\n        margin-bottom: 10px;\n        border-radius: 25px;\n    }\n    .head-class {\n        font-size: 17px\n    }\n    .parameter-a {\n        display: block;\n    }\n    .parameter-b {\n        display: none;\n    }\n    .selectInput {\n        position: absolute;\n        /*margin-left: 7px;*/\n        padding-left: 9px;\n        width: 180px;\n        /*border-radius:0px;*/\n        /*height: 38px;*/\n        left: 1px;\n        border-right: 0px;\n    }\n</style>\n<style lang=\"scss\">\n    .selectInput{\n        input{\n            border-right: 0px;\n            border-radius: 4px 0px 0px 4px;\n        }\n    }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCaseApi.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCaseApi.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AddCaseApi.vue?vue&type=template&id=b92789fa&scoped=true&\"\nimport script from \"./AddCaseApi.vue?vue&type=script&lang=js&\"\nexport * from \"./AddCaseApi.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AddCaseApi.vue?vue&type=style&index=0&id=b92789fa&lang=scss&scoped=true&\"\nimport style1 from \"./AddCaseApi.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b92789fa\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddCaseApi.vue?vue&type=style&index=1&lang=scss&\""],"sourceRoot":""}